{% extends 'apps_base.html' %}

{% block title %}Tables{% endblock %}

{% block apps_base_title %}Tables{% endblock %}

{% block apps_base_stylesheets %}
    {# 这里放样式 #}
    <style>
        .add-table-link {
            font-size: 0.8em;
            font-style: italic;
            white-space: nowrap;
            margin-left: 10px;
        }
    </style>
{% endblock %}

{% block apps_base_content %}
    {% if no_workplaces %}
        <div class="alert alert-warning" role="alert">
            <strong>No joined workplaces!</strong>
            <p>There are no companies you have joined, you can join one.</p>
        </div>
    {% else %}
        <div class="mb-2">
            <label for="tables-joined-workplaces">Select your workplace</label>
            <select class="custom-select" id="tables-joined-workplaces" onchange="reloadCompany()">
                {% for workplace in joined_workplaces %}
                    {% if workplace.unique_id == workplace_uuid %}
                        <option value="{{ workplace.unique_id }}" selected>{{ workplace.name }}</option>
                    {% else %}
                        <option value="{{ workplace.unique_id }}">{{ workplace.name }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <a href="{% url 'create_table_with_params' workplace_uuid=workplace_uuid %}"
               class="add-table-link">ADD</a>
        </div>
        {% if no_table_records %}
            <div class="alert alert-warning" role="alert">
                <strong>No table records!</strong>
                <p>There are no table records in this workplace, you can create one now.</p>
            </div>
        {% else %}
            <table class="table table-striped table-bordered text-center">
                <thead>
                <tr>
                    <th class="text-center">Name</th>
                    <th class="text-center">Date</th>
                    <th class="text-center">Creator</th>
                </tr>
                </thead>
                <tbody>
                {% for table in table_records %}
                    <tr>
                        <td><a href="{% url 'table_details' table_id=table.id %}">{{ table.name }}</a></td>
                        <td>{{ table.date }}</td>
                        <td>{{ table.creator }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        {% endif %}
    {% endif %}
    {#    <div class="float-style1">#}
    {#        <p>&nbsp&nbspPlease select your company &nbsp&nbsp</p>#}
    {#    </div>#}
    {#    <table class="table">#}
    {#        <tr>#}
    {#            <th width="400">Name</th>#}
    {#            <th width="200">Date</th>#}
    {#            <th width="200">Author</th>#}
    {#            <th width="200">Operatoin</th>#}
    {#        </tr>#}
    {#        <tr class="tr-size">#}
    {#            <td class="tr-size"><a href="{% url 'table_details' %}">Financial report (June)</a></td>#}
    {#            <td>2017.2.7</td>#}
    {#            <td>Wang Bo</td>#}
    {#            <td><button class="btn btn-danger" data-toggle="confirmation" type="submit">DELETE</button></td>#}
    {#        </tr>#}
    {#        <tr class="tr-size">#}
    {#            <td class="tr_size"><a href="{% url 'table_details' %}">Financial report (June)</a></td>#}
    {#            <td>2017.2.7</td>#}
    {#            <td>Wang Bo</td>#}
    {#            <td><button class="btn btn-danger" data-toggle="confirmation" type="submit">DELETE</button></td>#}
    {#        </tr>#}
    {#        <tr class="tr-size">#}
    {#            <td class="tr-size"><a href=" {% url 'table_details' %}">Financial report (June)</a></td>#}
    {#            <td>2017.2.7</td>#}
    {#            <td>Wang Bo</td>#}
    {#            <td><button class="btn btn-danger" data-toggle="confirmation" type="submit">DELETE</button></td>#}
    {#        </tr>#}
    {##}
    {##}
    {#        {% for item in data %}#}
    {#            <tr class="tr-size">#}
    {#                <td class="tr-size"><a href="{% url 'table_details' %}">item.name</a></td>#}
    {#                <td>item.date</td>#}
    {#                <td>item.author</td>#}
    {#                <td><button class="btn btn-danger" data-toggle="confirmation" type="submit">DELETE</button></td>#}
    {#            </tr>#}
    {#            <% empty %>#}
    {#            <p>No tables found<p>#}
    {#        {% endfor %}#}
    {#    </table>#}
    {##}
    {#    <div class="float-style1">#}
    {#        <button class="btn btn-primary" id="upload" onclick="location='upload'">Upload</button>#}
    {#    </div>#}
    {#    <div class="float-style2">#}
    {#    <center>#}
    {#        <s property="page"></s>#}
    {#        <button class="btn btn-default" id="previous_page" a href="">Prev</button>#}
    {#        <button class="btn btn-default" id="next_page" a href="">Next</button>#}
    {#    </center>#}
    {#    </div>#}
{% endblock %}

{% block apps_base_scripts %}
    <script>
        {# Reload page when another company is selected. #}

        function reloadCompany() {
            var company_uuid = $('#tables-joined-workplaces').find(":selected").val();
            window.location.replace("/tables/" + company_uuid + "/1/");
        }
    </script>
{% endblock %}