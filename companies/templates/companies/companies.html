{% extends 'apps_base.html' %}

{% block title %}Companies{% endblock %}

{% block apps_base_title %}Manage your companies{% endblock %}

{% block apps_base_stylesheets %}
    <style>
        .company-name {
            max-width: 100px;
            word-break: break-all;
        }

        .table-title {
            font-size: 1.7em;
            font-family: Dosis, sans-serif;
        }

        .company-manage-link {
            font-size: 0.8em;
            font-style: italic;
            white-space: nowrap;
        }

        .nav-tabs {
            font-weight: bold;
            font-size: 1em;
        }
    </style>
{% endblock %}

{% block apps_base_content %}
    <ul class="nav nav-tabs small" role="tablist">
        <li class="nav-item">
            <a class="nav-link text-uppercase active text-info" data-toggle="tab" href="#tab1" role="tab">Workplaces</a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-uppercase text-info" data-toggle="tab" href="#tab2" role="tab">Owned Companies</a>
        </li>
    </ul>
    <div class="tab-content py-3">
        <div class="tab-pane active" id="tab1" role="tabpanel">
            <div class="mb-3">
                <header class="table-title d-inline">Workplaces</header>
                <a class="company-manage-link" href="{% url 'join_company' %}">Join in a company</a>
            </div>
            <table class="table table-striped table-bordered text-center">
                <thead>
                <tr>
                    <th class="text-center">Company Name</th>
                    <th class="text-center">UUID</th>
                </tr>
                </thead>
                {% for workplace in workplaces %}
                    <tr>
                        <td class="company-name">{{ workplace.name }}</td>
                        <td>{{ workplace.unique_id }}</td>
                    </tr>
                {% endfor %}
            </table>
        </div>
        <div class="tab-pane active" id="tab2" role="tabpanel">
            <div class="mb-3">
                <header class="table-title d-inline-block">Owned Companies</header>
                <a class="company-manage-link" href="{% url 'create_company' %}">Create a new company</a>
            </div>
            <table class="table table-striped table-bordered text-center">
                <thead>
                <tr>
                    <th class="text-center">Company Name</th>
                    <th class="text-center">UUID</th>
                    <th class="text-center">Operation</th>
                </tr>
                </thead>
                {% for company in owned_companies %}
                    <tr>
                        <td class="company-name">{{ company.name }}</td>
                        <td>{{ company.unique_id }}</td>
                        <td>
                            <form action="{% url 'delete_company' %}" method="POST" style="margin: 0;">
                                {% csrf_token %}
                                <input type="hidden" name="unique_id" value="{{ company.unique_id }}"/>
                                <button class="btn btn-danger" data-toggle="confirmation" type="submit">DELETE</button>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>

{% endblock %}